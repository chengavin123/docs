---
title: "TDE pg_upgrade use cases"
navTitle: TDE pg_upgrade use cases
---

EDB supports using [pg_upgrade](/pg_upgrade_arguments) to add encryption to unencrypted systems. 
This table provides an overview of supported use cases.

| Use case                                                      | Source unencrypted server                     | Target encrypted server                                            |
|---------------------------------------------------------------|-----------------------------------------------|--------------------------------------------------------------------|
| Perform a minor upgrade and add encryption                    | Unencrypted EDB Postgres Extended Server 16.1 | Encrypted EDB Postgres Extended Server 16.2                        |
| Change the Postgres distribution and add encryption           | Unencrypted PostgreSQL 16                     | Encrypted EDB Postgres Advanced Server 16                          |
| Maintain the Postgres distribution and add encryption         | Unencrypted EDB Postgres Advanced Server 15   | Encrypted EDB Postgres Advanced Server 15                          |
| Maintain the Postgres distribution and rotate encryption keys | Encrypted EDB Postgres Advanced Server 15     | Encrypted EDB Postgres Advanced Server 15 with new encryption keys |

!!! Important
    Both source and target servers must be in the same Postgres major version. `pg_upgrade` only supports upgrades between minor versions.

## Overview 

To enable encryption:

1. Perform a backup of your system. 
1. Install the target Postgres version. 
1. Initialize a new server with TDE enabled. 
1. Use `pg_upgrade` with the `--copy-by-block` option to upgrade to a TDE system.

## Tutorials 

* [Enable TDE on an existing EDB Postgres Advanced Server database cluster](/enabling_tde_epas).